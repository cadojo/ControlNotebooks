<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Chapter 1: Dynamics · Control Theory Review</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Control Theory Review</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Chapter 1: Dynamics</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Dynamics"><span>Dynamics</span></a></li><li><a class="tocitem" href="#Model-Example"><span>Model Example</span></a></li><li><a class="tocitem" href="#What&#39;s-Next?"><span>What&#39;s Next?</span></a></li></ul></li><li><a class="tocitem" href="../Chapter 2: GTM Dynamics/">Chapter 2: GTM Dynamics</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Chapter 1: Dynamics</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Chapter 1: Dynamics</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cadojo/ControlTheoryNotes.jl/blob/master/src/Chapter 1: Dynamics.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Dynamics-and-Equations-of-Motion"><a class="docs-heading-anchor" href="#Dynamics-and-Equations-of-Motion">Dynamics and Equations of Motion</a><a id="Dynamics-and-Equations-of-Motion-1"></a><a class="docs-heading-anchor-permalink" href="#Dynamics-and-Equations-of-Motion" title="Permalink"></a></h1><p><em>How stuff moves!</em></p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>Our end goal as controls engineers is to <em>affect</em> a system in some desired way. To do this, we&#39;ll need a mathematical description of our system. This mathematical description is known as a <em>model</em>. There&#39;s a famous <a href="https://en.wikipedia.org/wiki/All_models_are_wrong">quote</a> about mathematical models: &quot;all models are wrong, but some are useful&quot;.</p><p>This is really important. We are <strong>always</strong> approximating our system by describing it with a model. The question we need to ask is &quot;is our approximate description of our system (our model) good enough?&quot;</p><div class="admonition is-info"><header class="admonition-header">Definitions</header><div class="admonition-body"><ul><li><strong>Model</strong> - a mathematical description of a system</li></ul></div></div><p>But what does this model <em>look like</em>? To answer this question, let&#39;s first discuss system dynamics, and equations of motion.</p><h2 id="Dynamics"><a class="docs-heading-anchor" href="#Dynamics">Dynamics</a><a id="Dynamics-1"></a><a class="docs-heading-anchor-permalink" href="#Dynamics" title="Permalink"></a></h2><p>If we want to <em>affect</em> a system, then by definition, the system <em>should</em> be affect-able (is that a word?) by external forces. These &quot;forces&quot; don&#39;t necessarily need to be physical forces: consider the affect of introducing new predators in an ecosystem with the goal of affecting predator-prey populations.</p><p>So we have a mathematical description, and we know we&#39;ll need some changing <em>parameter</em> to affect the mathematical description. Sounds like we need equations! The equations that govern our system are often called <em>equations of motion</em>. Any system that changes due to some external &quot;force&quot; is known as a <em>dynamical</em> system by definition.</p><p>The first step to any controls problem is identifying the <em>dynamics</em>; this usually means defining the <em>equations of motion</em> for our system. A set of <em>equations of motion</em> which describe our <em>dynamical</em> system <strong>is</strong> our model.</p><h2 id="Model-Example"><a class="docs-heading-anchor" href="#Model-Example">Model Example</a><a id="Model-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Example" title="Permalink"></a></h2><p>A really common system in engineering is known as the <strong>spring-mass-damper</strong>. We can roughly describe this system as a block on a table, which is connected to a spring. We can <em>force</em> (a.k.a. <em>affect</em>) this system by pulling on the block to extend or compress the spring.</p><h3 id="Model-Construction"><a class="docs-heading-anchor" href="#Model-Construction">Model Construction</a><a id="Model-Construction-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Construction" title="Permalink"></a></h3><p>Let&#39;s figure out our equations of motion. The following question is usually a useful starting point: &quot;what are the forces on our system?&quot; We know we&#39;ll have one external force: us pulling or pushing on the block! Let&#39;s call this external force <span>$f_e$</span>. We&#39;ll also have a force due to the spring, and a force due to the friction between the block and the table. The force due to the spring will be <em>proportional</em> to the position of the block with respect to the spring&#39;s neutral position: let&#39;s call the spring constant <span>$k$</span>. The force due to friction will be proportional to the <em>velocity</em> of the block (let&#39;s forget about static friction for now): let&#39;s call the coefficient of friction <span>$d$</span>.</p><p>With all of the forces identified, we can start constructing the <em>eqautions of motion</em> for this system. If we call our block&#39;s position <span>$x$</span>, then the acceleration <span>$\ddot{x}$</span> will be equal to the sum of our external force <span>$f_e$</span>, the spring force <span>$k x$</span>, and the force due to friction <span>$d \dot{x}$</span>. Summing these forces produces the following (common) spring-mass-damper equation, where <span>$m$</span> is the mass of the block.</p><p class="math-container">\[\begin{equation} f_e = m \ddot{x} + d \dot{x} + k x \end{equation}\]</p><p>We have our model! This is a second-order differential equation. It helps to divide all variables into two groups: parameters, and states. States describe the system at some point in time. In this case, state variables answer the following questions: &quot;where is the block, what is the velocity of the block, and what is the acceleration of the block?&quot; One set of valid state variables for this system is <span>$x$</span> and <span>$\dot{x}$</span>; we don&#39;t need to include <span>$\ddot{x}$</span> in our list of state variables because we can calculate <span>$\ddot{x}$</span> from <span>$x$</span> and <span>$\dot{x}$</span>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>We say &quot;one set of state variables&quot; because there may (and nearly always are) other valid state representations that could completely describe this system! State variables are <strong>not</strong> unique.</p></div></div><p>If we leave states as symbolic, and then look to the equation(s) of motion of a system, the <em>parameters</em> describe a specific <em>instance</em> of a system. Put another way, no matter what values <span>$f_e$</span>, <span>$d$</span>, and <span>$k$</span> take, this equation of motion is identifiable as a spring-mass-damper. For this reason, we can specify <span>$f_e$</span>, <span>$d$</span>, and <span>$k$</span> as parameters. We can assume a unit mass for the block for now.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The parameter <span>$f_e$</span> is our <em>control</em> parameter in this example, because we can change <span>$f_e$</span> to affect our system. For now, let&#39;s not differentiate between control parameters and non-control parameters.</p></div></div><h3 id="Coding-our-Model"><a class="docs-heading-anchor" href="#Coding-our-Model">Coding our Model</a><a id="Coding-our-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Coding-our-Model" title="Permalink"></a></h3><p>We can simulate these dynamics with Julia&#39;s <code>DifferentialEquations</code> package. If you&#39;re familiar with MATLAB, <code>DifferentialEquations</code> provides numerical integration solvers that are similar to MATLAB&#39;s <code>ode45</code> (and similar) solvers. We can use the <code>ModelingToolkit</code> package to conveniently put our model to code, and interface with <code>DifferentialEquations</code> for simulation.</p><pre><code class="language-">using ModelingToolkit

@parameters t fₑ d k
@variables x(t) ẋ(t)
δ = Differential(t)

eqs = [
    δ(x) ~ ẋ,
    δ(ẋ)~ - d*ẋ - k*x + fₑ
]

model = ODESystem(eqs, t, [x, ẋ], [fₑ, d, k]; name = &quot;HarmonicOscillator&quot;)</code></pre><h3 id="Simulating-our-Model"><a class="docs-heading-anchor" href="#Simulating-our-Model">Simulating our Model</a><a id="Simulating-our-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Simulating-our-Model" title="Permalink"></a></h3><p>With <code>model</code> defined above, we can use <code>DifferentialEquations</code> to simulate our system. Of course, to do this we&#39;ll need to specify numerical values for our parameters, and initial conditions (the simulation starting point) for our state variables. The code below specifies some arbitrary initial conditions and constant parameter values, and simulates the resulting dynamics.</p><pre><code class="language-">using Plots
using DifferentialEquations

problem = let x₀ = 0.1, ẋ₀ = 0.0, dₙ = 0.5, kₙ = 0.9, fₙ = 1.0, Δt = 30.0
    ODEProblem(
        model,
        [x =&gt; x₀, ẋ =&gt; ẋ₀],
        (0.0, Δt),
        [d =&gt; dₙ, k =&gt; kₙ, fₑ =&gt; fₙ]
    )
end

solutions = solve(problem, Tsit5(); reltol = 1e-12, abstol = 1e-12)
plot(solutions; title = &quot;Spring Mass Damper Simulation&quot;)</code></pre><h2 id="What&#39;s-Next?"><a class="docs-heading-anchor" href="#What&#39;s-Next?">What&#39;s Next?</a><a id="What&#39;s-Next?-1"></a><a class="docs-heading-anchor-permalink" href="#What&#39;s-Next?" title="Permalink"></a></h2><p>Okay, we just showed some applied modeling and simulation for spring-mass-damper dynamics. What about the primary system we&#39;re analyzing throughout these notes, NASA&#39;s Generic Transport Model (GTM)? The polynomial-approximated equations we&#39;ll be using are super long. Still want to see them? Be afraid! Continue on to Chapter 2!</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../Chapter 2: GTM Dynamics/">Chapter 2: GTM Dynamics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 22 June 2021 05:05">Tuesday 22 June 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
